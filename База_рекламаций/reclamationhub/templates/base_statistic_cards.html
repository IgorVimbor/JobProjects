<!-- Шаблон с карточками с общей статистикой по рекламациям -->

<!-- templates/base_statistic_cards.html

 Создали отдельный файл, т.к. карточки используются через include в шаблонах home.html и reports\references.html
-->

<div class="row mb-4">
    <div class="col-md-3">
        <div class="card text-white bg-primary">
            <div class="card-body">
                <h5 class="card-title">Всего рекламаций</h5>
                <p class="card-text display-4">{{ total_reclamations }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <!-- Кликабельная карточка -->
        <div class="card text-white bg-info clickable-card"
             onclick="openReclamationsFilter('NEW')"
             title="Показать новые рекламации">
            <div class="card-body">
                <h5 class="card-title">Новые</h5>
                <p class="card-text display-4">{{ new_reclamations }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <!-- Кликабельная карточка -->
        <div class="card text-white bg-warning clickable-card"
             onclick="openReclamationsFilter('IN_PROGRESS')"
             title="Показать рекламации в работе">
            <div class="card-body">
                <h5 class="card-title">В работе</h5>
                <p class="card-text display-4">{{ in_progress }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-white bg-success">
            <div class="card-body">
                <h5 class="card-title">Закрытые</h5>
                <p class="card-text display-4">{{ closed_reclamations }}</p>
            </div>
        </div>
    </div>
</div>

<!-- CSS стили для hover эффектов при наведении на карточки -->
<style>
.clickable-card {
    cursor: pointer;
    transition: transform 0.2s;
}
.clickable-card:hover {
    transform: scale(1.02);
}
</style>

<!-- Функция формирования URL для перехода при клике на карточку -->
<script>
function openReclamationsFilter(status) {
    const currentYear = document.getElementById('yearSelector').value || new Date().getFullYear();
    const url = `/admin/reclamations/reclamation/?status__exact=${status}&year__exact=${currentYear}`;
    window.open(url, '_blank');
}
</script>